/*! smenu 2014-04-21 */
!function(a,b){var c=b.requestAnimationFrame||b.webkitRequestAnimationFrame||b.mozRequestAnimationFrame||b.oRequestAnimationFrame||b.msRequestAnimationFrame||function(a){b.setTimeout(a,1e3/60)},d="ontouchstart"in b,e="onorientationchange"in b?"orientationchange":"resize",f=d?"touchstart":"mousedown",g=d?"touchmove":"mousemove",h=d?"touchend":"mouseup",i=d?"touchcancel":"mouseup",j=function(){function j(b,c){this.$el=a(b),this.options=a.extend({},a.fn.snapscroll.defaults,c),this.init()}return j.prototype={constructor:j,name:"scroll",version:"0.0.1",init:function(){this.$pages=this.$el.children(),this.length=this.$pages.length-1,this.height=this.$el.height(),this.curIndex=0,this.newIndex=0,this.startTime=null,this.drag=null,this.startY=null,this.direction=null,this.directionLocked=null,this.$target=null,this._initEvent(),console.log("init")},_initEvent:function(){this.$el.on(f,a.proxy(this.handleEvent,this)).on(g,a.proxy(this.handleEvent,this)).on(h,a.proxy(this.handleEvent,this)).on(i,a.proxy(this.handleEvent,this)),this.$pages.on("webkitTransitionEnd",a.proxy(this.handleEvent,this)),b.addEventListener(e,this,!1)},handleEvent:function(a){switch(a.type){case"tap":this._start(a);break;case f:this._start(a);break;case g:this._move(a);break;case h:case i:this._end(a);break;case"webkitTransitionEnd":this._flip();break;case e:this._resize()}},_start:function(a){if(!this.moved){var b=d?a.touches[0]:a;this.startTime=Date.now(),this.drag=!0,this.startY=b.pageY}},_move:function(a){if(a.preventDefault(),a.stopPropagation(),!this.moved&&this.drag){var b=d?a.touches[0]:a,c=b.pageY-this.startY;this.absDistY=Math.abs(c),this.absDistY<5||(this.directionLocked||(this.directionLocked=!0,0>c?(this.direction="UP",this.goTo(this.curIndex+1),this.$el.trigger("start:"+this.name,[this.curIndex,this.newIndex,this.direction]),this.newIndex<=this.length&&(this.$target=this.$pages.eq(this.newIndex),this._translate(-this.height))):(this.direction="DOWN",this.goTo(this.curIndex-1),this.$el.trigger("start:"+this.name,[this.curIndex,this.newIndex,this.direction]),this.newIndex>=0&&(this.$target=this.$pages.eq(this.newIndex),this._translate(-this.height)))),this.$target&&"UP"===this.direction?this._translate(this.height+c):this.$target&&"DOWN"===this.direction&&this._translate(c-this.height))}},_end:function(){this.directionLocked=null,this.drag=null,this.$target&&(this.moved=!0,"UP"===this.direction?this.height/this.absDistY>4?(this._scrollTo(this.height),this.change=null):(this._scrollTo(0),this.change=!0):"DOWN"===this.direction&&(this.height/this.absDistY>4?(this._scrollTo(-this.height),this.change=null):(this._scrollTo(0),this.change=!0)))},_flip:function(){this._offTranslate(),this.directionLocked=null,this.moved=null,this.change&&(this.$pages.eq(this.curIndex).removeClass("show"),this.$target.addClass("show"),this.curIndex=this.newIndex),this.$target.removeClass("active").removeAttr("style"),this.$target=null,this.change=null,this.$el.trigger("done:"+this.name,[this.newIndex])},_resize:function(){this.height=this.$el.height()},_translate:function(a){var b=this;c(function(){b.$target.addClass("active").css({"-webkit-transform":"translate3d(0,"+a+"px,0)"})})},_scrollTo:function(a,b){b=b||400,this.$target.css("-webkit-transition","-webkit-transform "+b+"ms"),this._translate(a)},_offTranslate:function(){this.$target.css("-webkit-transition","-webkit-transform 0ms")},goTo:function(a){console.info(this.newIndex,"index"),this.newIndex=a}},j}();a.fn.snapscroll=function(b){return this.each(function(){var c=a(this),d=a.fn.snapscroll.lookup[c.data("snapscroll")];return d||(a.fn.snapscroll.lookup[++a.fn.snapscroll.lookup.i]=new j(this,b),c.data("snapscroll",a.fn.snapscroll.lookup.i),d=a.fn.snapscroll.lookup[c.data("snapscroll")]),"string"==typeof b?d[b].apply(d,Array.prototype.slice.call(arguments,1)):void 0})},a.fn.snapscroll.lookup={i:0},a.fn.snapscroll.defaults={loop:!1}}(Zepto,window);